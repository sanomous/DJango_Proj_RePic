{% extends 'reapp/base.html' %}
{% load static %}
{% block title %}Profile | RePic{% endblock %}
{% block content %}
<style>
    .profile-image-container img {
        width: 150px;
        height: 150px;
        object-fit: cover;
        border-radius: 50%;
        border: 3px solid #0dcaf0;
        background: #f8f9fa;
    }
    .profile-image-container {
        margin-bottom: 1rem;
    }
</style>
<div class="container my-5">
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <div class="card shadow-sm">
                <div class="card-body">
                    <h3 class="text-center mb-4 fw-bold">USER PROFILE</h3>
                    <div class="row">
                        <div class="col-md-4 text-center mb-4">
                            <div class="profile-image-container">
                                <img id="profileImagePreview" src="{% if profile_picture_base64 %}data:image/jpeg;base64,{{ profile_picture_base64 }}{% else %}{% static 'reapp/img/default_profile.jpg' %}{% endif %}" alt="Profile Picture" class="img-fluid">
                            </div>
                        </div>
                        <div class="col-md-8">
                            <form method="POST" enctype="multipart/form-data">
                                {% csrf_token %}
                                {{ form.non_field_errors }}
                                <div class="mb-3">{{ form.first_name.label_tag }}{{ form.first_name }}</div>
                                <div class="mb-3">{{ form.last_name.label_tag }}{{ form.last_name }}</div>
                                <div class="mb-3">{{ form.email.label_tag }}{{ form.email }}</div>
                                <div class="mb-3">{{ form.phone_number.label_tag }}{{ form.phone_number }}</div>
                                <div class="mb-3">{{ form.date_of_birth.label_tag }}{{ form.date_of_birth }}</div>
                               
                                <div class="mb-3">{{ form.bio.label_tag }}{{ form.bio }}</div>
                                <div class="mb-3">{{ form.profile_picture.label_tag }}{{ form.profile_picture }}</div>
                                <button type="submit" class="btn btn-primary">Update Profile</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    // Show preview of selected profile image
    document.addEventListener('DOMContentLoaded', function() {
        const fileInput = document.querySelector('input[name="profile_picture"]');
        const previewImg = document.getElementById('profileImagePreview');
        if (fileInput) {
            fileInput.addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(evt) {
                        previewImg.src = evt.target.result;
                    };
                    reader.readAsDataURL(file);
                }
            });
        }
    });
</script>
{% endblock %} 